$TTL 300
@                       IN      SOA     <%=alces.hostip%>. nobody.example.com. (
                                        <%= Time.now.to_i %>   ; Serial
                                        600         ; Refresh
                                        1800         ; Retry
                                        604800       ; Expire
                                        300          ; TTL
                                        )

                        IN      NS      <%= alces.hostip %>.
@       IN MX   <%= alces.named.net.network.split(/\./).first %>  <%= alces.named.net.hostname[1..-1] %>.

IN NS <%= alces.hostip %>.

<%     alces.groups do |group| -%>
<%         group.nodes do |node| -%>
<%             node.networks.each do |name, network| -%>
<%                 if network.defined -%>
<%                     if network.network.to_s == alces.named.net.network.to_s -%>
<%= node.alces.nodename %><%= if name.to_s == 'bmc' then '.bmc' else '' end %> IN A <%= network.ip %>;
<%                     end -%>
<%                 end -%>
<%             end -%>
<%         end -%>
<%     end -%>
